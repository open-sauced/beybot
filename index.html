<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/comfy.js@latest/dist/comfy.min.js"></script>
  </head>
  <body>
    <div style="display:grid;justify-content:center;width:1040px" id="content">
    </div>
    <audio style="display: none" controls muted="muted" autoplay></audio>
    <script type="text/javascript">
        ComfyJS.Init( "bdougieYO" );
        ComfyJS.onCommand = ( user, command, message, flags, extra ) => {
          if( flags.broadcaster && command == "test" ) {
            console.log( "!test was typed in chat" );
          }
          if( command == "yo" ) {
            console.log( "!yo was typed in chat" );
            new addGif(user)
            setTimeout(removeGif, 5000)
          }
        }
        ComfyJS.onChat = ( user, message, flags, self, extra ) => {
          console.log( user + ":", message );
        }

        var wow = new Audio("horn.wav" ) ;

        function addGif(user) {
          removeGif(); // ensure that any previous gif is removed

          var container = document.createElement('div');

          var img = new Image();
          img.src = 'https://media.giphy.com/media/VxkNDa92gcsRq/giphy.gif';

          var title = document.createElement('h1')
          title.innerHTML = user + " is hype!";

          var content = document.getElementById('content');
          content.appendChild(title);
          title.style.color = 'purple';
          title.style.textAlign = 'center';

          container.appendChild(img);
          content.appendChild(container);
          wow.play();
          setTimeout(removeGif, 5000);
        }
  
        function removeGif() {
          var contentElement = document.getElementById('content');
          if (contentElement.firstElementChild) {
            contentElement.firstElementChild.remove();
          }
        }  
    </script>
  </body>
</html>
